var appControllers=angular.module("appControllers");appControllers.controller("artistsCtrl",["$scope","$routeParams","categoriesService","usersService","authService",function(a,b,c,d,e){_authentication=e.authentication,a.isAdmin=void 0!=_authentication.info&&void 0!=_authentication.info.user&&1==_authentication.info.user.role,a.curUser=void 0!=_authentication.info&&void 0!=_authentication.info.user?_authentication.info.user:null,a.editable=a.isAdmin,a.loggedIn=_authentication.isAuth;var f=function(){b.id?g(b.id):(i(),h())},g=function(b){c.get(b).then(function(b){a.cat=b,a.artists=a.cat.users},function(a,b){})},h=function(){d.list().then(function(b){a.artists=b},function(a,b){})},i=function(){a.networks=[{name:"facebook"},{name:"twitter"},{name:"google-plus"}]};a.deleteUser=function(a){d["delete"](a.id).then(function(b){toastr.success("Utilizador eliminado","",{timeOut:5e3}),a.status=0},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},f()}]),appControllers.controller("artistDetailsCtrl",["$scope","$routeParams","$location","usersService","authService",function(a,b,c,d,e){_authentication=e.authentication,a.isAdmin=void 0!=_authentication.info&&void 0!=_authentication.info.user&&1==_authentication.info.user.role,a.loggedIn=_authentication.isAuth,a.curUser=void 0!=_authentication.info&&void 0!=_authentication.info.user?_authentication.info.user:null;var f=function(){b.id?(g(b.id),i(b.id)):h()},g=function(b){d.get(b).then(function(b){a.artist=b},function(a,b){c.path("/"),toastr.error(a.err.message,"",{timeOut:5e3})})},h=function(){if(void 0!=e.authentication.info){var b=e.authentication.info.user.id;d.get(b).then(function(b){a.artist=b},function(a,b){c.path("/"),toastr.error(a.err.message,"",{timeOut:5e3})})}else c.path("/")},i=function(b){d.getAfter(b).then(function(b){a.otherArtists=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};a.deleteUser=function(a,b){a.preventDefault(),a.stopPropagation(),d["delete"](b.id).then(function(a){toastr.success("Utilizador eliminado","",{timeOut:5e3}),b.status=0,c.path("/artists")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},f()}]);var appControllers=angular.module("appControllers");appControllers.controller("countriesCtrl",["$scope","$routeParams","usersService","countriesService",function(a,b,c,d){var e=function(){b.id?(f(b.id),g(b.id)):(i(),h())},f=function(b){c.getFromCountry(b).then(function(b){a.artists=b},function(a,b){})},g=function(b){d.get(b).then(function(b){a.country=b},function(a,b){})},h=function(){c.list().then(function(b){a.countries=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},i=function(){a.networks=[{name:"facebook",url:"www.facebook.com"},{name:"twitter",url:"www.twitter.com"},{name:"google-plus",url:"www.googleplus.com"}]};e()}]);var appControllers=angular.module("appControllers");appControllers.controller("datePickerCtrl",["$scope","$routeParams",function(a,b){var c=function(){a.dateOptions={yearRange:"-0:-0",showOtherMonths:!0,firstDay:1,dateFormat:"d MM yy"}};c()}]);var appControllers=angular.module("appControllers");appControllers.controller("eventsCtrl",["$scope","authService","eventsService",function(a,b,c){_authentication=b.authentication,a.isAdmin=void 0!=_authentication.info&&void 0!=_authentication.info.user&&1==_authentication.info.user.role,a.editable=a.isAdmin,a.loggedIn=_authentication.isAuth;var d=function(){e()},e=function(){c.list().then(function(b){a.events=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};a.deleteEl=function(a){c["delete"](a.id).then(function(){e(),toastr.success("Evento eliminado","",{timeOut:5e3})},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},d()}]),appControllers.controller("eventsDetailsCtrl",["$scope","$location","$routeParams","eventsService","authService",function(a,b,c,d,e){_authentication=e.authentication,a.isAdmin=void 0!=_authentication.info&&void 0!=_authentication.info.user&&1==_authentication.info.user.role,a.loggedIn=_authentication.isAuth;var f=function(){c.id?(g(c.id),h(c.id),a.networks=[{name:"facebook"},{name:"twitter"},{name:"google-plus"}]):b.path("/")},g=function(c){d.get(c).then(function(b){a.event=b},function(a,c){b.path("/")})},h=function(b){d.getAfter(b).then(function(b){a.otherEvents=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};a.deleteEl=function(a){d["delete"](a.id).then(function(){toastr.success("Evento eliminado","",{timeOut:5e3}),b.path("/events")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},f()}]),appControllers.controller("eventsUserCtrl",["$scope","authService","eventsService",function(a,b,c){_authentication=b.authentication,a.editable=!0,a.loggedIn=_authentication.isAuth;var d=function(){e()},e=function(b){c.getFromUser().then(function(b){a.events=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};a.deleteEl=function(a){c["delete"](a.id).then(function(){e()},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},d()}]),appControllers.controller("eventFormCtrl",["$scope","$routeParams","$location","countriesService","authService","eventsService","moment",function(a,b,c,d,e,f,g){a.Event={},a.image={},a.submitted=!1,a.countries=[],a.Event.customMenu=[["bold","italic","underline","strikethrough","subscript","superscript"],["font-size"],["remove-format"],["left-justify","center-justify","right-justify"],["link"]],a.dateOptions={yearRange:"-0:-0",showOtherMonths:!0,firstDay:1,dateFormat:"d MM yy"};var h=function(){m(),b.id?(a.intent="edit",l(b.id)):(a.intent="new",a.Event={timeStart:"00:00:00",timeEnd:"00:00:00"})};a.submitEvent=function(){a.submitted=!0,0==Object.keys(a.eventForm.$error).length&&a.image.src&&void 0!=a.Event.timeStart&&void 0!=a.Event.dateStart?(i(),b.id?k(a.Event):j(a.Event)):toastr.error("Preencha os campos correctamente","",{timeOut:5e3})},a.hasError=function(b,c){return c?b.$dirty&&b.$error[c]||a.submitted&&b.$error[c]:b.$dirty&&b.$invalid||a.submitted&&b.$invalid};var i=function(){void 0!=a.image.src&&null==a.image.id&&(a.Event.image={},a.Event.image.url=a.image.src.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,""),a.Event.image.name=a.image.name,a.Event.image.extension=a.image.extension),void 0==a.Event.user&&(a.Event.user={id:e.authentication.info.user.id})},j=function(a){f.create(a).then(function(a){toastr.success("Evento criado!","",{timeOut:5e3}),c.path("/events")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},k=function(a){f.update(a.id,a).then(function(a){toastr.success("Evento actualizado!","",{timeOut:5e3}),c.path("/events")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},l=function(b){f.get(b).then(function(b){a.Event=b,void 0!=a.Event.image.id&&null!=a.Event.image.id&&(a.image.id=a.Event.id,a.image.src="http://www.artistaslusos.net/API/api/modules/v1/images/"+a.Event.image.url,a.image.name=a.Event.image.name,a.image.extension=a.Event.image.extension)},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},m=function(){d.list().then(function(b){a.countries=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};h()}]);var appControllers=angular.module("appControllers");appControllers.controller("homeCtrl",["$scope",function(a){}]);var appControllers=angular.module("appControllers");appControllers.controller("mainCtrl",["$scope","headService",function(a,b){a.head=b}]);var appControllers=angular.module("appControllers");appControllers.controller("footerCtrl",["$scope",function(a){a.icons=[{elClass:"govpt",url:"http://www.portugal.gov.pt/pt.aspx"},{elClass:"comunidade",url:"https://www.portaldascomunidades.mne.pt/pt/"},{elClass:"mirateca",url:"http://mirateca.com/default.aspx"}],a.networks=[{url:"https://www.facebook.com/MiratecArts",network:{name:"facebook"}},{url:"https://twitter.com/MiratecArts",network:{name:"twitter"}}]}]);var appControllers=angular.module("appControllers");appControllers.controller("menuCtrl",["$scope","authService","categoriesService",function(a,b,c){var d=null,e=null,f=!1,g=!1,h=[],i=function(){b.fillAuthData(),j(),k().then(l)},j=function(){d=b.authentication,a.isLoggedIn=d.isAuth,a.isAdmin=void 0!=d.info&&void 0!=d.info.user&&1==d.info.user.role,f=a.isLoggedIn,g=a.isAdmin,f&&(e=d.info.user,a.curUser=e)},k=function(){return c.list().then(function(a){h.push({style:"link",title:"Todos",url:"artists"});for(var b=0;b<a.length;b++){var c={style:"link",id:a[b].id,title:a[b].name};h.push(c)}})},l=function(){a.menu=[{style:"link",title:"Projeto",url:"project"},{style:"link",title:"Eventos",url:"events"},{style:"link",title:"Artistas",url:"artists",style:"static",subs:h},{style:"link",title:"Países",url:"countries"}],f?a.menu.push({style:"link",id:e.id,title:e.name,type:g?"admin":"regular",related:"user",url:"user"}):a.menu.push({style:"link",title:"Entrar",url:"enter",related:"user"})};a.$on("$locationChangeStart",function(a,c,d){b.fillAuthData(),j(),l()}),i()}]);var appControllers=angular.module("appControllers");appControllers.controller("projectCtrl",["$scope",function(a){}]);var appControllers=angular.module("appControllers");appControllers.controller("recoverPasswordModalCtrl",["$scope","$modal","$log",function(a,b,c){a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"recoverForm.tpl.html",controller:"recoverPasswordModalInstanceCtrl",size:c});d.result.then(function(){},function(){})}}]),appControllers.controller("recoverPasswordModalInstanceCtrl",["$scope","$modalInstance","usersService",function(a,b,c){a.Recover={},a.submitted=!1,toastr.options.preventDuplicates=!0,a.ok=function(){a.submitted=!0,0==Object.keys(a.recoverForm.$error).length&&(d(),b.close())},a.cancel=function(){b.dismiss("cancel")},a.hasError=function(b,c){return c?b.$dirty&&b.$error[c]||a.submitted&&b.$error[c]:b.$dirty&&b.$invalid||a.submitted&&b.$invalid};var d=function(){c.recoverPassword(a.Recover).then(function(a){toastr.success("Foi-lhe enviado um e-mail para a recuperar a sua password","",{timeOut:5e3})},function(a,b){toastr.error(a.err[0].message,"",{timeOut:5e3})})}}]);var appControllers=angular.module("appControllers");appControllers.controller("reportsCtrl",["$scope","$routeParams","usersService","categoriesService","countriesService",function(a,b,c,d,e){a.entryLimit=3,a.currentLast=0;var f=function(){g(),h(),i()},g=function(){d.list().then(function(b){a.artsArt=b;var c=Math.ceil(a.artsArt.length/a.entryLimit);a.artCols=[];for(var d=0;c>d;d++)a.artCols.push(d)},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},h=function(){e.listTotalCur().then(function(b){a.artsCountry=b;var c=Math.ceil(a.artsCountry.length/a.entryLimit);a.countryCols=[];for(var d=0;c>d;d++)a.countryCols.push(d)},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},i=function(){c.list().then(function(b){a.allArts=b},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})};a.setCurrentLast=function(){a.currentLast++},f()}]);var appControllers=angular.module("appControllers");appControllers.controller("timePickerCtrl",["$scope","$routeParams",function(a,b){var c=function(){a.hstep=1,a.mstep=1,a.ismeridian=!1};c()}]);var appControllers=angular.module("appControllers");appControllers.controller("userCtrl",["$scope",function(a){}]),appControllers.controller("userSignupCtrl",["$scope","$log","$route","$filter","$routeParams","$location","countriesService","districtsService","categoriesService","networksService","biosService","usersService","authService","imagesService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){_authentication=m.authentication,a.isAdmin=void 0!=_authentication.info&&void 0!=_authentication.info.user&&1==_authentication.info.user.role,a.User={},a.image={},a.submitted=!1,a.countries=[],a.districts=[],a.categories=[],a.bios=[],a.networks=[];var o=null,p=function(){u(),v(),w(),o=c.current.locals.pageType?c.current.locals.pageType:null,null!=o&&"editUser"==o?(a.intent="edit",void 0==e.id&&void 0!=m.authentication.info&&void 0!=m.authentication.info.user&&void 0!=m.authentication.info.user.id?t(m.authentication.info.user.id).then(x).then(y).then(w).then(u).then(v)["catch"](z):e.id&&a.isAdmin?t(e.id).then(x).then(y).then(w).then(u).then(v)["catch"](z):f.path("/")):(a.intent="new",x(),y())};a.createUser=function(){a.submitted=!0,0!=Object.keys(a.userForm.$error).length||!a.image.src||a.User.password!=a.User.confPassword&&(0!=a.User.password.length||void 0!=a.User.confPassword&&0!=a.User.confPassword.length)?toastr.error("Preencha os campos correctamente","",{timeOut:5e3}):(q(),null!=o&&"editUser"==o?s(a.User):r(a.User))},a.hasError=function(b,c){return c?b.$dirty&&b.$error[c]||a.submitted&&b.$error[c]:b.$dirty&&b.$invalid||a.submitted&&b.$invalid};var q=function(){if(void 0!=a.image.src&&null==a.image.id&&(a.User.image={},a.User.image.url=n.stripUrl(a.image.src),a.User.image.name=a.image.name,a.User.image.extension=a.image.extension),void 0!=a.User.social)for(var b in a.User.social){var c=a.User.social[b].url;void 0!=c&&(a.User.social[b].url=d("urlResolverVal")(c))}a.User.status=void 0!=a.User.status?a.User.status:1,a.User.created_at=void 0!=a.User.created_at?a.User.created_at:moment().format("YYYY-MM-DD hh:mm:ss"),a.User.updated_at=moment().format("YYYY-MM-DD hh:mm:ss")},r=function(a){l.create(a).then(function(a){toastr.success("Utilizador criado! Está neste momento pendente de aprovação pelo administrador","",{timeOut:1e4}),c.reload()},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},s=function(a){l.update(a.id,a).then(function(a){toastr.success("Utilizador actualizado!","",{timeOut:5e3}),f.path("/")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},t=function(b){return l.getOwner(b).then(function(b){a.User=b,a.User.password=null,void 0!=a.User.image&&void 0!=a.User.image.id&&null!=a.User.image.id&&(a.image.id=a.User.id,a.image.src="http://www.artistaslusos.net/API/api/modules/v1/images/"+a.User.image.url,a.image.name=a.User.image.name,a.image.extension=a.User.image.extension)},function(a,b){throw f.path("/"),new Error(a.err.message)})},u=function(){return g.list().then(function(b){a.countries=b},function(a,b){throw new Error(a.err.message)})},v=function(){return h.list().then(function(b){a.districts=b},function(a,b){throw new Error(a.err.message)})},w=function(){return i.list().then(function(b){a.categories=b},function(a,b){throw new Error(a.err.message)})},x=function(){return k.list().then(function(b){if(a.bios=b,null==o){a.User.bios=[];for(var c=0;c<b.length;c++)void 0==a.User.bios[c]&&(a.User.bios[c]={},a.User.bios[c].bio_id=b[c].id)}else{var d=[];d.length=b.length;for(var c=0;c<b.length;c++){d[c]={},d[c].bio_id=b[c].id;for(var e=0;e<a.User.bios.length;e++)a.User.bios[e].bio0.id==b[c].id&&(d[c]=a.User.bios[e])}a.User.bios=d}},function(a,b){throw new Error(a.err.message)})},y=function(){return j.list().then(function(b){if(a.networks=b,null==o){a.User.social=[];for(var c=0;c<b.length;c++)void 0==a.User.social[c]&&(a.User.social[c]={},a.User.social[c].network_id=b[c].id)}else{var d=[];d.length=b.length;for(var c=0;c<b.length;c++){d[c]={},d[c].network_id=b[c].id;for(var e=0;e<a.User.social.length;e++)a.User.social[e].network.id==b[c].id&&(d[c]=a.User.social[e])}a.User.social=d}},function(a,b){throw new Error(a.err.message)})},z=function(a){toastr.error(String(a),"",{timeOut:5e3})};a.deleteUser=function(a){l["delete"](a.id).then(function(){toastr.success("Utilizador eliminado!","",{timeOut:5e3}),f.path("/artists")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})},p()}]),appControllers.controller("userLoginCtrl",["$scope","$filter","$location","authService","$routeParams","usersService","eventsService",function(a,b,c,d,e,f,g){a.User={},a.image={},a.submitted=!1,a.isCorrect=!0,a.loginUser=function(){a.submitted=!0,0==Object.keys(a.userLoginForm.$error).length&&(e.id&&e.approve&&e.type?i():h())},a.hasError=function(b,c){return c?b.$dirty&&b.$error[c]||a.submitted&&b.$error[c]:b.$dirty&&b.$invalid||a.submitted&&b.$invalid};var h=function(){d.login(a.User).then(function(b){a.isCorrect=!0,toastr.success("Entrou com sucesso!","",{timeOut:5e3}),c.path("/")},function(b,c){a.isCorrect=!1})},i=function(){d.login(a.User).then(function(b){a.isCorrect=!0,j(e.id,e.approve,e.type)},function(b,c){a.isCorrect=!1})},j=function(a,b,d){"user"==d?f.get(a).then(function(a){a.status=parseInt(b),a.password=null,f.update(a.id,a).then(function(){toastr.success("Aprovação submetida!","",{timeOut:5e3}),c.path("/")})}):"event"==d&&g.get(a).then(function(a){a.status=parseInt(b),g.update(a.id,a).then(function(){toastr.success("Aprovação submetida!","",{timeOut:5e3}),c.path("/")})})}}]),appControllers.controller("userResetPassword",["$scope","$filter","$location","authService","$routeParams","usersService",function(a,b,c,d,e,f){a.User={},a.submitted=!1,a.resetPassword=function(){a.submitted=!0,0==Object.keys(a.userResetForm.$error).length&&e.resetToken&&g(e.resetToken)},a.hasError=function(b,c){return c?b.$dirty&&b.$error[c]||a.submitted&&b.$error[c]:b.$dirty&&b.$invalid||a.submitted&&b.$invalid};var g=function(b){var d={reset_token:b,password:a.User.password};f.sendNewPassword(d).then(function(a){toastr.success("Password alterada com sucesso!","",{timeOut:5e3}),c.path("/")},function(a,b){toastr.error(a.err.message,"",{timeOut:5e3})})}}]);var appFilters=angular.module("appFilters");appFilters.filter("myFilter",function(){return function(a,b,c){var d;return d}}),appFilters.filter("urlResolver",function(){return function(a){var b,c="http://";return b=void 0!=a&&a.indexOf("http://")<0&&a.indexOf("https://")<0?c+a:a}}),appFilters.filter("urlResolverVal",function(){return function(a){var b,c="http://";return b=void 0!=a&&a.indexOf("http://")<0&&a.indexOf("https://")<0?c+a:a}}),appFilters.filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}),appFilters.filter("timeFilter",function(){return function(a,b){if(a){var c=moment(a,"hh:mm").format(b);return c}}}),app.filter("trusted",["$sce",function(a){var b=document.createElement("div");return function(c){return b.innerHTML=c,a.trustAsHtml(b.textContent)}}]),app.filter("htmlToPlaintext",function(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}});var appServices=angular.module("appServices");appServices.factory("authService",["$http","$q","sessionStorage",function(a,b,c){var d={isAuth:!1,email:"",info:null},e={settings:{loginUrl:"API/api/web/v1/users/login"},errMsg:{MSG_INVALID_LOGIN_CREDENTIALS:"Please fill username and password fields!",MSG_NO_LOGIN_URL_IS_DEFINED:"INTERNAL: No login url is defined!"}},f=function(a){var b={error:!1,msg:""};return!angular.isDefined(a)||angular.isDefined(a.userName)||angular.isDefined(a.password)?(b.error=!0,b.msg=e.errMsg.MSG_INVALID_LOGIN_CREDENTIALS):angular.isDefined(e.settings.loginUrl)||(b.error=!0,b.msg=e.errMsg.MSG_NO_LOGIN_URL_IS_DEFINED),b},g=function(f){var g=b.defer();if(angular.isDefined(f)&&angular.isDefined(e.settings.loginUrl)){var i=e.settings.loginUrl,j="email="+f.email+"&password="+f.password;a.post(i,j,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){c.set("authorizationData",{token:a.access_token,email:f.email,info:a}),d.isAuth=!0,d.email=f.email,d.info=a,g.resolve(a)}).error(function(a,b){h(),g.reject(a)})}return g.promise},h=function(){c.remove("authorizationData"),d.isAuth=!1,d.email="",d.info=null},i=function(){var a=c.get("authorizationData");a&&(d.isAuth=!0,d.email=a.email,d.info=a.info)};return{login:g,logOut:h,verify:f,fillAuthData:i,authentication:d}}]);var appServices=angular.module("appServices");appServices.factory("biosService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/bios",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c)},h=function(c){return e(b,a,"get",d)},i=function(c){return e(b,a,"put",d+"/"+id,c)},j=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,list:h,update:i,"delete":j}}]);var appServices=angular.module("appServices");appServices.factory("categoriesService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/categories",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c+"?expand=users,areas")},h=function(c){return e(b,a,"get",d+"?expand=users,areas")},i=function(c){return e(b,a,"put",d+"/"+id,c)},j=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,list:h,update:i,"delete":j}}]);var appServices=angular.module("appServices");appServices.factory("countriesService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/countries",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c+"?expand=users")},h=function(c){return e(b,a,"get",d+"?expand=users")},i=function(){return e(b,a,"get",d+"/totalcur")},j=function(c){return e(b,a,"put",d+"/"+id,c)},k=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,list:h,listTotalCur:i,update:j,"delete":k}}]);var appServices=angular.module("appServices");appServices.factory("districtsService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/districts",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c)},h=function(c){return e(b,a,"get",d)},i=function(c){return e(b,a,"put",d+"/"+id,c)},j=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,list:h,update:i,"delete":j}}]);var appServices=angular.module("appServices");appServices.factory("eventsService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/events",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c)},h=function(){return e(b,a,"get",d+"/fromuser")},i=function(c){return e(b,a,"get",d+"/getAfter/"+c)},j=function(){return e(b,a,"get",d)},k=function(c,f){return e(b,a,"put",d+"/"+c,f)},l=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,getFromUser:h,getAfter:i,list:j,update:k,"delete":l}}]);var appServices=angular.module("appServices");appServices.factory("headService",[function(){var a="Artistas Lusos",b="Plataforma de artistas lusos",c="http://www.artistaslusos.net/assets/img/logos/homepage_logo.png",d="http://www.artistaslusos.net",e=function(a){a=a},f=function(){return a},g=function(a){a=a},h=function(){return b},i=function(a){a=a},j=function(){return c},k=function(a){a=a},l=function(){return d};return{setTitle:e,getTitle:f,setDescription:g,getDescription:h,setImage:i,getImage:j,setUrl:k,getUrl:l}}]);var appServices=angular.module("appServices");appServices.factory("imagesService",[function(){var a=function(a){return/^data:image\/(png|jpg|jpeg|gif);base64,/.test(a)?a.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,""):/^http/.test(a)?a.substring(a.lastIndexOf("/")+1):void 0};return{stripUrl:a}}]);var appServices=angular.module("appServices");appServices.service("authInterceptorService",["$q","$injector","$location","sessionStorage",function(a,b,c,d){var e={STATUS_401:{LOGGED_IN_URL:"/",NOT_LOGGED_IN_URL:"/enter"}},f=function(a){a.headers=a.headers||{};var b=d.get("authorizationData");return b&&(a.headers.Authorization="Bearer "+b.token),a},g=function(f){if(401==f.status){var g="/",h=angular.isDefined(d.get("authorizationData"));if(h){var i=b.get("authService");i.logOut(),toastr.error("Sem autorização. A efetuar logout...","",{timeOut:5e3}),g=e.STATUS_401.LOGGED_IN_URL}else g=e.STATUS_401.NOT_LOGGED_IN_URL;c.path(g)}return a.reject(f)};return{request:f,responseError:g}}]);var appServices=angular.module("appServices");appServices.factory("networksService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/networks",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d+"/create",c)},g=function(c){return e(b,a,"get",d+"/"+c)},h=function(c){return e(b,a,"get",d)},i=function(c){return e(b,a,"put",d+"/"+id,c)},j=function(c){return e(b,a,"delete",d+"/"+c)};return{create:f,get:g,list:h,update:i,"delete":j}}]);var appServices=angular.module("appServices");appServices.factory("sessionStorage",["$rootScope","$window",function(a,b){var c=function(a){return JSON.parse(b.sessionStorage.getItem(a))},d=function(a,c){b.sessionStorage.setItem(a,JSON.stringify(c))},e=function(a){b.sessionStorage.removeItem(a)};return{get:c,set:d,remove:e}}]);var appServices=angular.module("appServices");appServices.factory("usersService",["$http","$q","$rootScope",function(a,b,c){var d="API/api/web/v1/users",e=function(a,b,c,d,e){var f=a.defer(),g={"Content-Type":"application/json"},h=null!=e?b[c](d,e,{headers:g}):b[c](d,{headers:g});return h.success(function(a){f.resolve(a)}).error(function(a,b){f.reject({err:a,status:b})}),f.promise},f=function(c){return e(b,a,"post",d,c)},g=function(c){return e(b,a,"get",d+"/"+c+"?expand=bios,cat,curCountry,descCountry,dist,image,social")},h=function(c){return e(b,a,"get",d+"/viewOwner/"+c+"?expand=bios,cat,curCountry,descCountry,dist,image,social")},i=function(c){return e(b,a,"get",d+"/getAfter/"+c+"?expand=cat,curCountry,descCountry,dist,image")},j=function(c){return e(b,a,"get",d+"/curCountryUsers/"+c+"?expand=curCountry")},k=function(c){return e(b,a,"get",d+"?expand=bios,cat,curCountry,descCountry,dist,image,social")},l=function(c,f){return e(b,a,"put",d+"/"+c,f)},m=function(c){return e(b,a,"delete",d+"/delete/"+c)},n=function(c){return e(b,a,"post",d+"/requestPasswordReset",c)},o=function(c){return e(b,a,"post",d+"/resetPassword",c)};return{create:f,get:g,getOwner:h,getAfter:i,getFromCountry:j,list:k,update:l,"delete":m,recoverPassword:n,sendNewPassword:o}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("artistsList",[function(){return{restrict:"E",templateUrl:"scripts/directives/artistsList.html",scope:{list:"=list",max:"@?",editable:"@?",deleteEl:"&?",curUser:"=?"},replace:!0,link:function(a,b,c){void 0==a.max&&(a.max="infinite"),c.$observe("editable",function(){a.editable=a.$eval(c.editable)}),a.deleteUser=function(b){a.deleteEl()(b)}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("coloredStats",[function(){return{restrict:"E",templateUrl:"scripts/directives/coloredStats.html",scope:{list:"=list",groupByProp:"@?",displayProp:"@?",route:"@?",detailProp:"@?"},replace:!0,link:function(a,b,c){a.setProp=function(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split("."),d=0,e=c.length;e>d;++d){var f=c[d];if(!(f in a))return;a=a[f]}return a},a.setOffset=function(a,b){var c=b;if(angular.isDefined(a)){var d=Object.keys(a).length;if(c>d)return Math.ceil((c-d)/2)}return!1},a.objLength=function(a){return angular.isDefined(a)?Object.keys(a).length:!1}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("eventsList",[function(){return{restrict:"E",templateUrl:"scripts/directives/eventsList.html",scope:{list:"=list",max:"@?",editable:"@?",deleteEl:"&?"},replace:!0,link:function(a,b,c){void 0==a.max&&(a.max="infinite"),c.$observe("editable",function(){a.editable=a.$eval(c.editable)}),a.deleteEvent=function(b){a.deleteEl()(b)}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("facebookComments",["$location","$timeout",function(a,b){return{restrict:"E",templateUrl:"scripts/directives/facebookComments.html",scope:{text:"@?",textClass:"@?",containerClass:"@?"},replace:!0,link:function(b,c,d){b.curPath=a.absUrl()}}}]),app.directive("dynFbCommentBox",["$timeout",function(a){function b(a,b,c,d){return'<div class="fb-comments" data-href="'+a+'" data-numposts="'+b+'" data-colorsheme="'+c+'" data-width="'+d+'"></div>'}return{restrict:"A",scope:{},link:function(c,d,e){e.$observe("pageHref",function(c){var f=c,g=e.numposts||5,h=e.colorscheme||"light",i=e.width||"100%";d.html(b(f,g,h,i)),a(function(){"undefined"!=typeof FB&&FB.XFBML.parse(d[0])})})}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("login",[function(){return{restrict:"E",templateUrl:"scripts/directives/login.html",scope:!0,replace:!0,link:function(a,b,c){}}}]),app.directive("ngConfirmClick",[function(){return{priority:-1,restrict:"A",link:function(a,b,c){b.bind("click",function(a){var b=c.ngConfirmClick;b&&!confirm(b)&&(a.stopImmediatePropagation(),a.preventDefault())})}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("pageFooter",[function(){return{restrict:"E",templateUrl:"scripts/directives/pageFooter.html",replace:!0}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("pageHeader",["$location","authService",function(a,b){return{restrict:"E",templateUrl:"scripts/directives/pageHeader.html",scope:!0,replace:!0,link:function(c,d,e){d.on("click","a",null,function(){d.find(".collapse.in").collapse("hide"),d.find(".navbar-toggle").hasClass("collapsed")||d.find(".navbar-toggle").addClass("collapsed")}),c.defineCurrentView=function(b,c,d){var e=a.path().substring(a.path().indexOf("/")+1);if(e.length>0){var f=e;if(angular.isDefined(b.url)&&null==c&&null==d)return 0==f.indexOf(b.url)&&f.length>=b.url.length;if(angular.isDefined(b.id)&&null!=c&&null==d){if(c.active=!1,b.active=!1,c.url+"/"+b.id==f)return!0}else if(null!=c){if(f==b.url)return!0}else if(null!=d&&f.indexOf(d)>=0&&f.length==d.length)return!0}},c.logoutUser=function(){b.logOut(),toastr.success("Logout com sucesso!","",{timeOut:5e3}),a.path("/")}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("recoverPassword",[function(){return{restrict:"E",templateUrl:"scripts/directives/recoverPassword.html",scope:!0,replace:!0,link:function(a,b,c){}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("resetPassword",[function(){return{restrict:"E",templateUrl:"scripts/directives/resetPassword.html",scope:!0,replace:!0,link:function(a,b,c){}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("selectPicker",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){c.selectpicker("render"),b.$watch(d.obj,function(){a(function(){"countryDesc"==d.id&&void 0!=b.$eval(d.ngModel)&&e(b.$eval(d.ngModel)),c.selectpicker("refresh")})}),b.setDistrict=function(a){var b=$(".selectpicker#district");void 0!=a&&189==a.id?(b.prop("disabled",!1),b.selectpicker("refresh")):(b.selectpicker("deselectAll"),b.prop("disabled",!0),b.selectpicker("refresh"))};var e=function(a){var b=$(".selectpicker#district");void 0!=a&&189==a.id?(b.prop("disabled",!1),b.selectpicker("refresh")):(b.prop("disabled",!0),b.selectpicker("refresh"))}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("signup",[function(){return{restrict:"E",templateUrl:"scripts/directives/signup.html",scope:!0,replace:!0,link:function(a,b,c){
$(".selectpicker").selectpicker("render")}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("social",["$location",function(a){return{restrict:"E",templateUrl:"scripts/directives/social.html",scope:{networks:"=networks",textClass:"@?",text:"@?",action:"@?",containerClass:"@?",obj:"=?"},replace:!0,link:function(b,c,d){b.curLoc=encodeURIComponent(a.absUrl()),b.encodeEl=function(a){return encodeURIComponent(a)}}}}]);var appDirectives=angular.module("appDirectives");appDirectives.directive("timePicker",["moment",function(a){return{restrict:"E",templateUrl:"scripts/directives/timePicker.html",scope:!0,transclude:!0,replace:!0,require:"ngModel",link:function(b,c,d,e){var f=!0;if(void 0==e.$modalValue){var g=new Date;g.setHours(0),g.setMinutes(0),b.useObj=g}b.changed=function(){var a=b.useObj.getHours()+":"+b.useObj.getMinutes()+":00";e.$setViewValue(a),e.$render()},b.$watch(function(){return e.$modelValue},function(c){if(void 0!=c){if(f){var d=a(c,"hh:mm"),e=new Date;e.setHours(d.hours()),e.setMinutes(d.minutes()),b.useObj=e}f=!1}})}}}]),app.directive("uploadPreview",["$log",function(a){return{restrict:"A",scope:{image:"=?image",maxWidth:"@?maxWidth",maxHeight:"@?maxHeight"},link:function(a,b,c){var d=new FileReader,e=new Image;d.onload=function(c){e.src=c.target.result,e.onload=function(){var d=this.width,e=this.height;if(a.maxWidth=angular.isDefined(a.maxWidth)?a.maxWidth:1080,a.maxHeight=angular.isDefined(a.maxHeight)?a.maxHeight:760,e<=a.maxHeight&&d<=a.maxWidth){var f=b[0].files[0];a.image.src=c.target.result,a.image.name=f.name,a.image.extension=f.name.substr(f.name.lastIndexOf(".")+1),a.image.fileError=null,a.image.id=null}else toastr.error("Imagens devem ter no máximo "+a.maxWidth+"x"+a.maxHeight+"px!");angular.element(".imageSpinPlaceholder").removeClass("spinner"),angular.element(".fileInput").val(null),a.$apply()}},b.on("change",function(){var c=!1;b[0].files[0].type.match("image.*")||(toastr.error("Formato não permitido."),c=!0),b[0].files[0].size>2e6&&(toastr.error("Ficheiro deve ter no máximo 2MB."),c=!0),c?(a.image.src=null,a.image.id=null,angular.element(".fileInput").val(null),a.image.fileError=!0,a.$apply()):(d.readAsDataURL(b[0].files[0]),angular.element(".imageSpinPlaceholder").addClass("spinner"))})}}}]),app.directive("imageActions",function(){return{restrict:"A",scope:!1,link:function(a,b,c){a.deleteImage=function(){a.image.src=null,a.image.id=null,a.image.name=null,a.image.extension=null,a.image.fileError=null,a.innerImage=a.$eval(c.objimg)}}}});